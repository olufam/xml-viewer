<?xml version="1.0" encoding="utf-8"?>
<t24help>
<header>
<product>DE</product>
<table>DE.MAPPING</table>
</header>
<overview>
<ovdesc>

            <p>Mapping Table defines where data for outward messages (and message headers) is located within the raw message data passed to APPLICATION.HANDOFF by the banking applications.  The banking applications do not format and send messages themselves.  They send between 1-9 records to the Delivery System which then uses the Mapping Table to locate each field from within that raw data. </p>
            <p>Great care is needed when setting up the Mapping Table as the system cannot check that correct fields are being referenced within the banking application records. </p>
            <p>Note that both header and message must be mapped.  Header fields are referenced by special names entered in HEADER.NAME.  The following fields must be Mapped, but CUSTOMER and LANGUAGE can be blank: </p>
            <p>CUSTOMER  COMPANY  CUS.COMPANY  LANGUAGE  DEPARTMENT TRANS.REF </p>
            <p>Several other fields can be entered.  Some, such as OVR.CARRIER, are only required in special circumstances, but the following should be mapped when possible, so they can be used to set up conditions for the control of statistics, readdressing and rerouting: </p>
            <p>ACCOUNT    VALUE.DATE    CURRENCY    AMOUNT </p>
            <p>In addition to the six mandatory header fields, only those message fields described as mandatory in the relevant Delivery Message record must be mapped.  However, it is better to map as many of the message fields as possible and then omit any not required for a particular output by dropping them at the formatting stage.  This way they can be used later if necessary. </p>
        </ovdesc>
<ovimage></ovimage>
</overview>
<menu>
<t>
<field>RESERVED.8</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>RESERVED.7</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>USR.INPUT.POS</field>
<desc>
            <p>Defines the location of a field within the banking application records that is passed by the application to Delivery System.</p>
            <p>When a banking application calls APPLICATION.HANDOFF it can pass between 1-9 records, but typically it will pass 2 or 3.</p>
            <p>The Delivery System accesses the data required to build a message and its header through mapping.</p>
            <p>For more details see the help text of INPUT.POSITION.</p>
            <p />
        </desc>
</t>
<t>
<field>ERI.CODE</field>
<desc>
            <p>This field contains the ERI code word used in SWIFT messages. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>If the associated field AC.AMOUNT has been entered this field is mandatory otherwise not required.</p>
            <p>If entered it must contain either 'OCMT' or 'CHGS'.</p>
        </desc>
</t>
<t>
<field>RESERVED.6</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>RECORD.NAME.LOC</field>
<desc>
            <p>Help Text for this field is unavailable.  Please refer to the T24 User Guides for further information.</p>
        </desc>
</t>
<t>
<field>FIELD.NAME</field>
<desc>
            <p>Specifies the name of a field as defined in the appropriate DE.MESSAGE record. </p>
            <p>Only fields described as mandatory in the appropriate DE.MESSAGE record must be mapped, but others should be mapped if possible. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>1-18 type A (alphanumeric) characters.  INPUT.POSITION, FIELD.NAME and HEADER.NAME form a multivalue set. (Optional input)  Must be on the DE.MESSAGE record for the appropriate Message Type.</p>
        </desc>
</t>
<t>
<field>USR.FIELD.NAME</field>
<desc>
            <p>Specify the name of a field as defined in the appropriate DE.MESSAGE record.</p>
            <p>The name of the field can be from the USR or SYSTEM fields as maintained in DE.MESSAGE for the Appropriate message Type.</p>
            <p>When a same field is mapped in both SYSTEM as well as USER fields, then details mapped to USER field will be used for Handoff.</p>
            <p>Only fields described as mandatory in the appropriate DE.MESSAGE record must be mapped , but others should be mapped if possible.</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>1-18 type A (alphanumeric) characters. USR.INPUT.POSITION, USR.INPUT.NAME     and USR.DESCRIPT form a multivalue set. (Optional input)</p>
            <p>Must be on the DE.MESSAGE record for the appropriate Message Type</p>
        </desc>
</t>
<t>
<field>FIELD.DESCR</field>
<desc>
            <p>A description of the associated fields INPUT.NAME and INPUT.POSITION. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Mandatory field when there is no associated INPUT.NAME.</p>
        </desc>
</t>
<t>
<field>INPUT.NAME</field>
<desc>
            <p>This field allows a field name to be defined for the corresponding Record number. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Multi value fields can be defined in the format FIELD-mv.</p>
            <p>Input is only allowed in this field when the associated INPUT.POSITION is an integer.</p>
            <p>It is necessary to have a corresponding entry in INPUT.FILE for the INPUT.REC.NO</p>
            <p>Input can be either numeric or alphabetic.  If a number is entered, it will automatically get converted to a field name by checking the Input File standard Selection record.</p>
        </desc>
</t>
<t>
<field>LOCAL.REF</field>
<desc>
            <p>This is a multi valued field. Standard T24 alphanumeric field.</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>A maximum of 35 characters may be entered.</p>
        </desc>
</t>
<t>
<field>USR.INPUT.NAME</field>
<desc>
            <p>This field allows a field name to be defined for the corresponding Record number</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>Multi value fields can be defined in the format FIELD-mv.   </p>
            <p>Input is only allowed in this field when the associated USR.INPUT.POSITION is     an integer.   </p>
            <p>It is necessary to have a corresponding entry in INPUT.FILE for the     INPUT.REC.NO   </p>
            <p>Input can be either numeric or alphabetic. If a number is entered, it will     automatically get converted to a field name by checking the Input File     standard Selection record.</p>
        </desc>
</t>
<t>
<field>RESERVED.5</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>USR.DESCRIPT</field>
<desc>
            <p>A description of the associated fields USR.INPUT.NAME and USR.INPUT.POSITION.</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>Mandatory field when there is no associated USR.INPUT.NAME.</p>
        </desc>
</t>
<t>
<field>USR.FLD.NAME</field>
<desc>
            <p>Specify the name of a field as defined in the appropriate DE.MESSAGE record.</p>
            <p>The name of the field can be from the USR or SYSTEM fields as maintained in DE.MESSAGE for the Appropriate message Type.</p>
            <p>When a same field is mapped in both SYSTEM as well as USER fields, then details mapped to USER field will be used for Handoff.</p>
            <p>Only fields described as mandatory in the appropriate DE.MESSAGE record must be mapped , but others should be mapped if possible.</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>1-18 type A (alphanumeric) characters. USR.INPUT.POS, USR.INPUT.NAME and     USR.FLD.DESC form a multivalue set. (Optional input)   </p>
            <p>Must be on the DE.MESSAGE record for the appropriate Message Type</p>
        </desc>
</t>
<t>
<field>OVERRIDE</field>
<desc>
        	<p>This is a multi valued field. </p>
        	<p>Contains details of any override applicable to this record.</p>
        	<p>
                <p>Validation Rules:</p>
            </p>
            <p>A maximum of 35 characters may be entered. This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>HEADER.POSITION</field>
<desc>
            <p>Specifies a position in the Header file for a field to be mapped into. The use of HEADER.POSITION makes Mapping slightly faster than otherwise. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>1-2 numeric characters.  Multivalue set.</p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>USR.FLD.DESC</field>
<desc>
            <p>A description of the associated fields USR.INPUT.NAME and USR.INPUT.POS.</p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>Mandatory field when there is no associated USR.INPUT.NAME.</p>
        </desc>
</t>
<t>
<field>RESERVED.4</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>INPUT.REC.NO</field>
<desc>
            <p>Number of the 'data' record passed to the delivery system. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Must be in the range 1 - 9.  No duplicates allowed.</p>
        </desc>
</t>
<t>
<field>INPUT.POSITION</field>
<desc>
            <p>Defines the location of a field within the banking application records that is passed by the application to Delivery System. </p>
            <p>When a banking application calls APPLICATION.HANDOFF it can pass between 1-9 records, but typically it will pass 2 or 3. </p>
            <p>The Delivery System accesses the data required to build a message and its header through mapping. </p>
            <p>There are two mapping styles: </p>
            <p>By position.  </p>
            <p>This uses the position in the handoff record which maps to where the data can be found. Such as 1.3. </p>
            <p>By Field Name </p>
            <p>This uses the name of a field in a record (defined in INPUT.FILE) and maps the content of that field to the delivery field.  </p>
            <p>Example: </p>
            <p>If the application passes two records then fields within those records are accessed by using Input Position of 1.1 1.2 1.3 etc. for fields in the first record, and 2.1 2.2 2.3 2.4 etc. for the second record. </p>
            <p>Suppose that Value Date is the 3rd field of the 2nd record passed from the banking application, then it should be mapped as: </p>
            <p />
            <p>INPUT.POSITION  2.3</p>
            <p />
            <p>FIELD.NAME VALUE.DATE </p>(or some other descriptive name e.g. MATURITY V D)  <p /><p>HEADER.NAME VALUE.DATE</p><p>DE.MAPPING has been modified to allow integers (in the range 1-9) to be entered in this field, so long as there is a corresponding entry in the INPUT.REC.NO field and INPUT.FILE field. This should normally be followed with an entry (either numeric or alphabetic) in the INPUT.NAME field and a corresponding entry on the FIELD.DESCRIPTION field. </p><p>Note : This example only names 2 records, but any references such as 3.1, 4.55, 5.23 etc. will not be rejected - the fields will simply be mapped as blank. </p><p><p>Validation Rules:</p></p><p /></desc>
</t>
<t>
<field>ROUTINE</field>
<desc>
            <p>This field is used to call a user defined routine to map additional data which is not normally available for the message type. </p>
            <p>The routine is passed all nine of the handoff records in a DIMensioned array and the MAPPING.KEY as the tenth element of the DIMensioned array as the first argument and a null in the second argument, which is used as a return error message. If there is a value in the second value on return from the routine the mapping does not proceed and the error message is handed back to the calling application. </p>
            <p>If all the records are blanked by the call to the user routine the mapping process does not proceed and an error returned to the calling application. </p>
            <p>The routine itself should be specified as : </p>
            <p>EXAMPLE.ROUTINE(MAT EXAMPLE.REC, ERR.MSG) </p>
            <p>For example there is a routine DE.DISP.MSG which does a "Print Preview" of the Printed and Swift message on the screen and can be set up in the DE.MAPPING record in case the user wishes to see the printed and Swift output prior to committing the transaction. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Up to 30 alphanumeric characters, of which the first must be an '@' character. The routine must be catalogued and in the UniVerse VOC file. Optional input. </p>
        </desc>
</t>
<t>
<field>INPUT.REC.DESC</field>
<desc>
            <p>A description of the input record. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Optional input.</p>
        </desc>
</t>
<t>
<field>RESERVED.3</field>
<desc>
            <p>This field is reserved for future expansion. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>This is a NOINPUT field.</p>
        </desc>
</t>
<t>
<field>INPUT.FILE</field>
<desc>
            <p>The name of the T24 Standard Selection record containing the layout of the associated INPUT.REC.NO. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Optional input.</p>
        </desc>
</t>
<t>
<field>HEADER.NAME</field>
<desc>
            <p>Specifies whether a field will be placed on a message header.  (It may also be put into the body of a message.)  When a field is placed on a message header it must be given one of the special names listed below. </p>
            <p>The HEADER.NAME is optional as a header may not contain this particular field.  However, somewhere in each Delivery Mapping record the following fields must be mapped onto the header: </p>
            <p>    COMPANY      CUSTOMER    CUS.COMPANY     DEPARTMENT   LANGUAGE    TRANS.REF </p>
            <p>A header may also contain the following optional fields and, when possible, should be mapped so they can be used for Disposition Control: </p>
            <p>    ACCOUNT      AMOUNT       APP.FORMAT     APP.PDE      CURRENCY     DESTINATION     OVR.CARRIER  OVR.DEL.ADD  PRIORITY     STATUS       VALUE.DATE   MESSAGE.TYPE     IN.PAY.TYPE  TEST.KEY.REQ </p>
            <p>COMPANY contains the Company Code that originated the message. </p>
            <p>CUS.COMPANY contains the Company Code where the Customer file is held. </p>
            <p>DEPARTMENT contains the Department Code that generated the message. </p>
            <p>LANGUAGE contains the Language Code from the Customer record. </p>
            <p>TRANS.REF contains the reference number of the transaction that generated           the message. </p>
            <p>AMOUNT contains the most significant amount - an amount which        characterises the message and might be useful for statistical        analysis. </p>
            <p>APP.FORMAT contains a number that subdivides the Message Type for purposes            of Formatting, Disposition Control and Statistics.  The value            should be either numeric or a 2-character Application Code            optionally followed by 1 to 4 digits. </p>
            <p>Example: </p>
            <p>A debit advice is always a SWIFT Message Type 900. However, three different layouts will be required for printed versions of Message Type 900: </p>
            <p>    Debit advices with no charges.     Debit advices showing charges.     Debit advices for charges only. </p>
            <p>These must have different values of APP.FORMAT. </p>
            <p>CURRENCY contains the Currency code of the above Amount field. </p>
            <p>TEST.KEY.REQ defines whether a testkey must be entered for the message.              If this is sent as 'Y' to delivery it will ensure that a              testkey is required even if the message table does not              require one for the message type.  If, however, it is sent as              'NO' it will not override the requirement for this message              type if it has been set in the message table. </p>
            <p>OVR.CARRIER specifies 'PRINT', 'TELEX' or 'SWIFT' as the carrier to be             used for a message.  It should only be used in exceptional             circumstances because when OVR.CARRIER is used the message             formatting routines do not read the DE.PRODUCT file. Therefore: a)   Only one copy of a message will be generated. </p>
            <p>b)   The language will be taken from a Customer file. </p>
            <p>c)   The priority will be as passed from the banking application. </p>
            <p>d)   The Customer address used will be the first one corresponding to the      appropriate Customer number on ADDRESS file unless an Override      Delivery Address (OVR.DEL.ADD) has been specified, or the      Customer field does not contain a number but instead contains a      multivalue set explicitly giving the Customer's address. </p>
            <p>OVR.DEL.ADD (Override Delivery Address) contains a special delivery             address for a message but, in general, this should not be             used.  Special Delivery Addresses are usually placed in the             DE.ADDRESS file as a Customer's second address and             subsequently picked up due to a special DE.PRODUCT record. </p>
            <p>VALUE.DATE contains the most significant value date - one which            characterises a message and might be useful for statistical            analysis. </p>
            <p>MESSAGE.TYPE contains the Message Type from Message table.  It should only              be Mapped when a banking application wishes to use the same              Delivery Mapping record for different Message Types. </p>
            <p>An ACCOUNT number mapped into a header should be one that will be useful for controlling a message and possibly for statistics reporting. </p>
            <p>CUSTOMER contains either a multivalue set containing the address to send a          message to, or the number of a customer who is to receive a          message.  The Customer's address will then be looked up in the          Delivery Address file.  If Override Carrier and Override Delivery          Address are present 'Customer' is allowed to be blank, but should          contain the Override Delivery Address. </p>
            <p>APP.PDE (A pplication Determined Possible Duplicate Entry) allows the         banking application to determine when a warning should be added to         a message to indicate it may be in duplicate.  In Format Print a         field can be defined with Conversion set to Duplicate, in which         case printing will only take place if App.PDE in the header is set         to 'PDE'. </p>
            <p>DESTINATION is used for controlling the printer at which a message should             be printed. </p>
            <p>PRIORITY can be specifically set by the application, instead of according          to the normal criteria set by Delivery System.  A Priority set by          the Banking Application can be increased by the Delivery System          during formatting, but cannot be reduced.  (It may only be          changed from Normal to Priority or Urgent, or from Priority to          Urgent.) </p>
            <p>STATUS can be set to WAIT Hrs:Mins, HOLD Hrs:Mins, HOLD or DELETE.  If        Status is DELETE the Disposition of a message will be set to        DELETED when formatting begins, instead of being formatted. </p>
            <p>IN.PAY.TYPE is the inward payment type from the Funds Transfer transaction             record. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>The name of one of the header fields listed under 'Details'.  INPUT.POSITION, FIELD.NAME and HEADER.NAME form a multivalue set. (Optional input)</p>
        </desc>
</t>
<t>
<field>ID</field>
<desc>
            <p>Identifies Message Type, application, and a sub-classification within the application, which together form the key for Mapping fields from the banking application into the Delivery System message and header. </p>
            <p>Different sub-classifications are used to extract data for the same message type in different ways within an application. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p TYPE="a">
                <p>1-4 numeric. (mandatory input) </p>
                <p> '.' (mandatory input) </p>
                <p> One of the following: 'FX' 'FT' 'MM' 'LD' 'LC' 'AC' 'SC' 'EF' 'BD' 'SW' 'RP' (mandatory input)</p>
                <p> '.' (mandatory input) e) 1-5 type A (alphanumeric) characters (Optional input) The Message Type must exist on the DE.MESSAGE table. </p>
            </p>
        </desc>
</t>
<t>
<field>AC.AMOUNT</field>
<desc>
            <p>This field will contain the field name of the account fields on the record to be converted. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Must be a field name that exists on this record.</p>
        </desc>
</t>
<t>
<field>AC.CURRENCY</field>
<desc>
            <p>This field contains the field name that points to the currency of the auto payment settlement account. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>Optional input.</p>
            <p>Cannot be entered if the corresponding field AC.FIELD has not been entered.</p>
            <p>If entered it must be a valid field defined in the field FIELD.NAME on this record.</p>
        </desc>
</t>
<t>
<field>AC.FIELD</field>
<desc>
            <p>This field will contain the name of the field that contains the T24 account number to which the payment amount is to be debited/credited. </p>
            <p>Together with fields AC.CURRENCY, AC.AMOUNT and ERI.CODE this field will be used to build the Euro Related Information (ERI) in SWIFT messages. ERI is an optional element which can be added to narrative fields in SWIFT messages, to show the original currency and amount when a payment is settled in EURo for a non EURo contract. ERI has the format: </p>
            <p>      /xxxx/CCYnnnnnnn </p>
            <p>where xxxx is OCMT (original amount)                    or CHGS (charges)       CCY is the original currency       nnnnn  is the original amount </p>
            <p>The delivery system will automatically convert amount, currency and account fields specified in these fields when the account contained in this specified field is linked to an AUTO.PAY.ACCOUNT. The auto pay account may be in a different currency to the account (i.e. EUR), in this case the amount in the specified AC.AMOUNT field is converted to the Auto pay account currency, the currency contained in the AC.CURRENCY field is converted. </p>
            <p>The original values are stored together with the associated ERI.CODE (either the value OCMT or CHGS), and this can then be used as the ERI in the related SWIFT message. </p>
            <p>For example: </p>
            <p>LD contract (Loan) for 10,000 IEP starts tomorrow. The drawdown account is the IEP nostro, which has an AUTO.PAY.ACCT of EUR nostro. The system will generate an MT100 message for the payment of the loan drawdown amount. </p>
            <p>DE.MAPPING 100.LD.1 contains the following: </p>
            <p>AC.FIELD            PAYMENT.ACCOUNT AC.CURRENCY     CURRENCY AC.AMOUNT       AMOUNT ERI.CODE          OCMT </p>
            <p>The content of the above the fields passed from LD will be initially: </p>
            <p>PAYMENT.ACCOUNT      IEP Nostro CURRENCY             IEP AMOUNT               10,000 </p>
            <p>These will be converted as follows: </p>
            <p>PAYMENT.ACCOUNT     EUR Nostro CURRENCY            EUR AMOUNT              10,000 / 0.796244 (fixed rate IEP/EUR) = 12,558.96 </p>
            <p>The ERI data will be : /OCMT/DEM10000,00 </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>If entered must be a valid field name in the field on this record FIELD.NAME.</p>
            <p>No Duplicates are allowed.</p>
        </desc>
</t>
<t>
<field>DESCRIPTION</field>
<desc>
            <p>Describes when this Mapping record is used, ie. what the Message Type means, and the reason for the sub-classification. </p>
            <p>Descriptions may be entered in each of the languages defined in the LANGUAGE table. </p>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p>3-35 type A (alphanumeric) characters.  Multilanguage field. (Mandatory input)</p>
        </desc>
</t>
</menu>
</t24help>

