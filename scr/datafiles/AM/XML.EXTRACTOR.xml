<?xml version="1.0" encoding="utf-8"?>
<t24help>
<header>
<product>AM</product>
<table>XML.EXTRACTOR</table>
</header>
<overview>
<ovdesc>

            <p>This table defines how fields in T24 are to be mapped into the XML data structure.</p>
            <p />
            <p>  The XML.EXTRACTOR records are referenced by the application AM.SUB.REPORT.</p>
        </ovdesc>
<ovimage></ovimage>
</overview>
<menu>
<t>
<field>OPERATION</field>
<desc>
            <p>Defines the instruction or 'field'.</p>
            <p>  The field is defaulted if the FIELD.NAME field is populated</p>
            <p>  with a field name that is found on the LINK.FILE's</p>
            <p>  Standard Selection record.</p>
            <p>  The following instructions are supported:</p>
            <p />
            <table>
                <tr>
                    <td>
                        <p>FIELD.NAME</p>
                        <p />
                    </td>
                    <td>
                        <p>Locates the field reference by using LINK.FILES's STANDARD.SELECTION record</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CALC XXX : YYY</p>
                        <p />
                    </td>
                    <td>
                        <p>Concatenate two LINK.NAME fields. By this option we cannot extract the value of the link created in another multi value set.</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>"zzzzz"</p>
                        <p />
                    </td>
                    <td>
                        <p>Use the constant contained in quotes. </p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!USER</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract current user id.</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!TODAY</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract today's date.</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!COMPANY</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract current company id.</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!LANGUAGE</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract user's language code. </p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!LOCAL.CCY</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract local currency code.</p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!LAST.WORKING.DAY</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract last working day. </p>
                        <p />
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>!NEXT.WORKING.DAY</p>
                        <p />
                    </td>
                    <td>
                        <p>Extract next working day. </p>
                        <p />
                    </td>
                </tr>
            </table>
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p>  32 characters. Mandatory Input</p>
        </desc>
</t>
<t>
<field>GLOBUS.FLD</field>
<desc>
            <p>Defines the field name that is found on the GLOBUS.FILEs</p>
            <p>  STANDARD.SELECTION record, if GLOBUS.FILE is specified.</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p />
            <p />
            <p>  Optional</p>
            <p />
            <p />
            <p>  1-18 type A (alphanumeric)       characters.</p>
        </desc>
</t>
<t>
<field>XML.OUTPUT.NAME</field>
<desc>
            <p>Defines the name to be used for creating the XML file</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  1</p>
            <p>  -35 Type "A"       (alphanumeric) characters</p>
            <p />
            <p>  Mandatory</p>
        </desc>
</t>
<t>
<field>LINK.FLD</field>
<desc>
            <p>Defines the field name that is found on the LINK.FILEs</p>
            <p>  STANDARD.SELECTION record.</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p />
            <p />
            <p>  1-18 type A (alphanumeric)       characters</p>
        </desc>
</t>
<t>
<field>LINK.CONVERSION</field>
<desc>
            <p>Defines the routine to be executed when the field GLOBUS.FILE</p>
            <p>  is blank.</p>
            <p />
            <p />
            <p />
            <p />
            <p>  When a valid basic routine is used in LINK.CONVERSION, the</p>
            <p>  control will be passed to the routine mentioned on this</p>
            <p>  field and the output of the routine</p>
            <p />
            <p />
            <p />
            <p />
            <p>  The routine mentioned here should be written with 4</p>
            <p>  parameters as given below:</p>
            <p />
            <p />
            <p>  Example :</p>
            <p />
            <p />
            <p />
            <p>  TEST.LINK.CONV.RTN (IN.FILE.ARRAY, IN.ID.ARRAY, RET.IDS, RET.FILE.NAME)</p>
            <p />
            <p />
            <p>  Incoming parameters:</p>
            <p />
            <p />
            <p>  IN.FILE.ARRAY  Will contain all the files used in the current record.</p>
            <p />
            <p />
            <p>  IN.ID.ARRAY -</p>
            <p />
            <p />
            <p />
            <p>  Outgoing parameters:</p>
            <p />
            <p />
            <p>  IN.RET. IDS  The id of the records to be processed separated</p>
            <p>  by FM</p>
            <p />
            <p />
            <p>  RET.FILE.NAME  The file to be used for extracting the data.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p>  Optional.</p>
            <p />
            <p>  The routine should be a valid basic routine preceded by an ampersand(&amp;).</p>
            <p />
            <p>  35 character alphanumeric.</p>
        </desc>
</t>
<t>
<field>XML.TOP.LEVEL</field>
<desc>
            <p>Specifies the primary</p>
            <p />
            <p>  In the following Example VALUATIONREPORT is the root element                    of the document.</p>
            <p />
            <p>  &lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</p>
            <p>  &lt;VALUATIONREPORT&gt;</p>
            <p>  &lt;PORTFOLIO.INFO id="200000-1"&gt;</p>
            <p>  &lt;PORTFOLIO.ID&gt;200000-1&lt;/PORTFOLIO.ID&gt;</p>
            <p>  &lt;REF.CCY&gt;USD&lt;/REF.CCY&gt;</p>
            <p>  &lt;/PORTFOLIO.INFO&gt;</p>
            <p>  &lt;/VALUATIONREPORT&gt;</p>
            <p />
            <p>  This root element should be specified in the field                    XML.TOP.LEVEL without anglular brackets.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>  1-35 Alphanumeric characters</p>
            <p>  The value should confirm to the rules specified for naming                    the Elements in XML document</p>
            <p>  Mandatory</p>
        </desc>
</t>
<t>
<field>LINK.NAME</field>
<desc>
            <p>Defines a name for the LINK.FLD and is used as a reference</p>
            <p>  for the current value.</p>
            <p />
            <p />
            <p />
            <p />
            <p>  The Link allows you identify a link instruction so that its</p>
            <p>  current value can be referenced by another link, e.g. to</p>
            <p>  concat 2 link fields. Other than this, it is provided only</p>
            <p>  for the sake of clarity.</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p>  1</p>
            <p>  8 type A (alphanumeric)       characters</p>
            <p />
            <p />
            <p>  Mandatory</p>
        </desc>
</t>
<t>
<field>XML.FILE.NAME.FMT</field>
<desc>
            <p>Defines the format of the name to be used for creating the XML.</p>
            <p />
            <p>  Purpose of this is, if we use only OUTPUT.NAME for creatng</p>
            <p>  the XML file,</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  OUTPUT.NAME</p>
            <p />
            <p />
            <p>  OUTPUT.NAME#TYPE#ID#DATE</p>
            <p />
            <p />
            <p>  TYPE#ID#DATE#OUTPUT.NAME</p>
            <p />
            <p />
            <p>  DATE#TYPE#ID#OUTPUT.NAME</p>
            <p />
            <p />
            <p>  Where:</p>
            <p />
            <p />
            <p>  OUTPUT.NAME  Field OUTPUT.NAME</p>
            <p />
            <p />
            <p>  TYPE  P  Portfolio or G - Group</p>
            <p />
            <p />
            <p>  DATE  Statement date</p>
            <p />
            <p />
            <p>  ID  Portfolio</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p>  1-35 Type "A" (alphanumeric) characters</p>
            <p />
            <p>  Mandatory. If left blank       defaults to format OUTPUT.NAME#TYPE#ID#DATE</p>
        </desc>
</t>
<t>
<field>LANGUAGE</field>
<desc>
            <p>For future use. Presently defaulted to English.</p>
        </desc>
</t>
<t>
<field>XML.OUTPUT.PATH</field>
<desc>
            <p>Defines the path on the server where the resulting XML file</p>
            <p>  will be saved.</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p />
            <p />
            <p>  Mandatory. If left blank       defaults to run directory</p>
            <p />
            <p />
            <p>  1-35 Type "A"       (alphanumeric) characters</p>
        </desc>
</t>
<t>
<field>LINK.FILE</field>
<desc>
            <p>Indicates the file to be used to extract the data from the</p>
            <p>  fields specified in field LINK.FLD.</p>
            <p />
            <p>  If specified, the LINK.FILE along with fields LINK.NAME,</p>
            <p>  LINK.FLD &amp; OPERATION are used to determine the ID to be</p>
            <p>  used for reading the file name specified in field</p>
            <p>  GLOBUS.FILE. If no LINK.FILE is specified, then the ID</p>
            <p>  passed to XML.EXTRACTOR is used to read the file name</p>
            <p>  specified in field GLOBUS.FILE.</p>
            <p />
            <p>  This is useful in cases where in the ID of the file to be</p>
            <p>  extracted depends on the data in another file.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>   1-35       Alphanumeric characters.</p>
            <p />
            <p />
            <p>  Valid GLOBUS file with STANDARD.SELECTION record</p>
            <p>  existing for this file.</p>
            <p />
            <p />
            <p>  To specify a LINK.FILE, the file should exist in field</p>
            <p>  GLOBUS.FILE of the preceding multivalue sets</p>
        </desc>
</t>
<t>
<field>GLOBUS.FILE</field>
<desc>
            <p>Specifies the file to be used to extract the data mentioned</p>
            <p>  in the field GLOBUS.FLD (Field No 15). If left blank, the</p>
            <p>  control will be passed directly to the field LINK.CONVERSION</p>
            <p>  and the output from this routine will be used to decide the</p>
            <p>  file name to be used.</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  1-35       Alphanumeric characters.</p>
            <p />
            <p>  Valid       T24 file with STANDARD.SELECTION record</p>
            <p>  existing for this file.</p>
        </desc>
</t>
<t>
<field>XML.LABEL</field>
<desc>
            <p>Defines the name of the content element which form the start</p>
            <p>  and end tags.</p>
            <p />
            <p />
            <p />
            <p />
            <p>  This field together with GLOBUS.FLD and OPERATION will form</p>
            <p>  the element which contains the data.</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  35 Alphanumeric characters.</p>
            <p />
            <p>  Should confirm to the rules       specified for naming the</p>
            <p>  Elements in XML document</p>
        </desc>
</t>
<t>
<field>XML.GROUP</field>
<desc>
            <p>Indicates the parent element under which the element</p>
            <p>  mentioned in field XML.LEVEL will be created as a child element.</p>
            <p />
            <p>  Example : For extracting the following XML document</p>
            <p />
            <p>  &lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</p>
            <p>  &lt;VALUATIONREPORT&gt;</p>
            <p>  &lt;PORTFOLIO.INFO id="200000-1"&gt;</p>
            <p>  &lt;PORTFOLIO.ID&gt;200000-1&lt;/PORTFOLIO.ID&gt;</p>
            <p>  &lt;REF.CCY&gt;USD&lt;/REF.CCY&gt;</p>
            <p />
            <p>  &lt;VALUATION.DATA id="200000-1.LD0022200021..20000824.5.5.D"&gt;</p>
            <p>  &lt;SECURITY.NO&gt;LD0022200021&lt;/SECURITY.NO&gt;</p>
            <p>  &lt;SHORT.NAME&gt;*** Commitment Assets - &lt;/SHORT.NAME&gt;</p>
            <p>  &lt;SECURITY.CCY&gt;USD&lt;/SECURITY.CCY&gt;</p>
            <p>  &lt;NO.NOMINAL&gt;25000.00&lt;/NO.NOMINAL&gt;</p>
            <p>  &lt;/VALUATION.DATA&gt;</p>
            <p>  &lt;/PORTFOLIO.INFO&gt;</p>
            <p>  &lt;/VALUATIONREPORT&gt;</p>
            <p />
            <p>  For PORTFOLIO.INFO -  both XML.LEVEL &amp; XML.GROUP are same</p>
            <p>  as it contains directly data elements and there are no</p>
            <p>  parent elements for PORTFOLIO.INFO.</p>
            <p />
            <p>  For VALUATION.DATA  - XML.LEVEL is VALUATION.DATA and</p>
            <p>  XML.GROUP is PORTFOLIO.INFO as VALUATION.DATA is the sub</p>
            <p>  element of the element PORTFOLIO.INFO.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>  1-35 Alphanumeric characters</p>
            <p />
            <p>  The value should confirm to the rules specified for naming</p>
            <p>  the Elements in XML document</p>
        </desc>
</t>
<t>
<field>STRUCTURE.ID</field>
<desc>
            <p>Alphanumeric key to this record.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>  Mandatory input.</p>
            <p>  Must be 1-30 alphanumeric characters.</p>
        </desc>
</t>
<t>
<field>XML.LEVEL</field>
<desc>
            <p>Defines the name of the Element which is next to</p>
            <p>  XML.TOP.LEVEL. This forms a multivalue set with fields 5 TO</p>
            <p>  16.The data elements extracted from fields XML.LABEL, GLOBUS</p>
            <p>  FLD &amp; OPERATIION within this multivalue set will be</p>
            <p>  included within this element.</p>
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p>  1-35       Alphanumeric characters.</p>
            <p>  Should confirm to the rules specified for naming the Elements                    in XML document.</p>
        </desc>
</t>
<t>
<field>DEFINITION</field>
<desc>
            <p>Specifies the XML declaration which is normally the first</p>
            <p> line in the document, that identifies the document as XML document.</p>
            <p />
            <p />
            <p />
            <p />
            <p>  If left blank, the following default definition is used.</p>
            <p />
            <p />
            <p />
            <p />
            <p>  &amp;lt;?xml version="1.0" encoding="ISO-8859-1"?&amp;gt;</p>
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p />
            <p />
            <p>  1-50 Alphanumeric characters</p>
            <p />
            <p />
            <p>  Mandatory</p>
        </desc>
</t>
<t>
<field>DESCRIPTION</field>
<desc>
            <p>Free text description of this record</p>
            <p />
            <p />
            <p>  This field may be expanded to allow the user to enter the</p>
            <p>  description in various languages.</p>
            <p />
            <p />
            <p />
            <p>
                <p>Validation Rules:</p>
            </p>
            <p />
            <p />
            <p />
            <p>  1-35       Alphanumeric characters.</p>
            <p>  Multi       value field.</p>
            <p>  Sub valued for language</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  Mandatory input</p>
        </desc>
</t>
<t>
<field>DISPLAY.LEVEL</field>
<desc>
            <p>Specifies whether this element level can used as a parent or</p>
            <p>  group level for other elements within the XML document.</p>
            <p>  Yes or No.</p>
            <p />
            <p>  YES   Indicates that this level can be used as parent level</p>
            <p>  for other</p>
            <p />
            <p />
            <p>  NO  Indicates that this level is used only for manipulation</p>
            <p>  purposes like getting the data from concat file where the</p>
            <p>  output is used by other levels but not for display purposes.</p>
            <p />
            <p />
            <p />
            <p />
            <p />
            <p>  1-3       Alphanumeric characters.</p>
            <p />
            <p>  Only       Yes/No is allowed. Default value  Yes</p>
        </desc>
</t>
<t>
<field>FLD.CONVRSN</field>
<desc>
            <p>Specifies conversion to be performed on the data in GLOBUS.FLD.</p>
            <p />
            <p> Can take the format: LINK XXX,YYY</p>
            <p />
            <p> This will read file XXX using the data in GLOBUS.FLD as the key and return field name YYY as defined in the STANDARD.SELECTION record for XXX. Do not specify F. or company mnemonic in file name. Field Name YYY may be a data field or an I or J descriptor defined in the Standard Selection record of file XXX Note that if a multi or sub valued item is returned from a LINK conversion, the multi and sub values are converted to spaces, so the result cannot be displayed in separate lines.  </p>
            <p />
            <p> Can also define the routine to be executed for special formatting</p>
            <p>  of the data specified in GLOBUS.FLD.</p>
            <p />
            <p>  When a valid basic routine is used in FLD.CONVRSN, the output</p>
            <p>  of the routine will be value stored in the XML.LABEL element .</p>
            <p />
            <p>  The routine mentioned in this field should be written with 4</p>
            <p>  parameters as given below:</p>
            <p />
            <p />
            <p>  Example :</p>
            <p />
            <p />
            <p>  TEST.FLD.CONVRSN.RTN (IN. FLD.NAME, RET.VALUE, IN.REC.ID, IN.DATA.REC)</p>
            <p />
            <p />
            <p>  Incoming Parameters:</p>
            <p />
            <p />
            <p>  IN.FLD.NAME  The field name for which the process is made.</p>
            <p />
            <p />
            <p>  RET.VALUE - Current value of the field.</p>
            <p />
            <p />
            <p>  IN.REC.ID  Id of the record for the multivalue that is being processed</p>
            <p />
            <p />
            <p>  IN.DATA.REC  Contains full record of the file</p>
            <p />
            <p />
            <p>  Outgoing Parameters:</p>
            <p />
            <p>  RET.VALUE</p>
            <p />
            <p />
            <p>
                <p>
                    <p>Validation Rules:</p>:</p> Optional Input.</p>
            <p />
            <p>  The routine should be a valid basic routine preceded by an ampersand(&amp;).</p>
            <p>  35 character alphanumeric.</p>
        </desc>
</t>
</menu>
</t24help>

